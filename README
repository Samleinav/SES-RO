# ðŸ“§ Botble SES Email Forwarder  
ðŸ”„ **Plugin para reenviar correos con AWS SES sin perder el remitente original**  

## ðŸ“Œ DescripciÃ³n  
Este plugin para **Botble Laravel** permite gestionar el reenvÃ­o de correos utilizando **AWS SES**, evitando problemas con el remitente original gracias a la manipulaciÃ³n de encabezados como **Reply-To**.  

âœ… **CaracterÃ­sticas principales:**  
- ðŸ“© **RecepciÃ³n de correos a travÃ©s de AWS SES** y almacenamiento en S3.  
- ðŸ”” **Notificaciones eficientes con AWS Lambda + SNS**, evitando lÃ­mites de tamaÃ±o en mensajes.  
- ðŸ“¥ **Descarga y procesamiento del correo en el servidor.**  
- âœ‰ï¸ **ReenvÃ­o inteligente con Postfix**, asegurando que las respuestas lleguen al remitente correcto.  
- ðŸ— **IntegraciÃ³n sencilla en Botble Laravel.**  

---

## ðŸš€ **InstalaciÃ³n**  

### 1ï¸âƒ£ **Clonar el repositorio**  
```sh
git clone https://github.com/tuusuario/botble-ses-email-forwarder.git
cd botble-ses-email-forwarder
2ï¸âƒ£ Copiar archivos del plugin a Botble
sh
Copiar
Editar
cp -r botble-ses-email-forwarder /platform/plugins/ses-email-forwarder
3ï¸âƒ£ Activar el plugin en Botble
En el panel de administraciÃ³n de Botble Laravel, ve a Plugins y activa SES Email Forwarder.

4ï¸âƒ£ Configurar variables en .env
AÃ±ade las credenciales necesarias para AWS:


âš™ï¸ CÃ³mo Funciona
ðŸ“¥ RecepciÃ³n del correo
Un usuario envÃ­a un correo a info@midominio.com.
AWS SES recibe el correo y lo almacena en S3.
ðŸ”” NotificaciÃ³n con AWS Lambda + SNS
Una Lambda procesa el mensaje, eliminando informaciÃ³n pesada y enviando solo los datos necesarios a SNS.
SNS notifica a nuestro servidor Botble Laravel.
ðŸ“¥ Descarga y encolado en Postfix
Nuestro plugin recibe la notificaciÃ³n, descarga el correo desde S3 y lo encola en Postfix para su reenvÃ­o.
âœ‰ï¸ ReenvÃ­o sin perder el remitente original
Manipulamos los encabezados del correo para incluir Reply-To, asegurando que si el destinatario responde, la respuesta llegue al remitente original.

ðŸ“Œ Ejemplo de modificaciÃ³n de encabezado en PHP:

protected function addHeader(string $header, string $value, $rawEmail) {
    return preg_replace('/^' . preg_quote($header, '/') . ': (.+)$/mi', $header . ': ' . $value, $rawEmail);
}

ðŸ›  Uso del Plugin para Botble
Debes crear un plugin con artisian para Botble y copiar el codigo. 
Tambien recuerda instalar las dependencias.
ðŸ” VerificaciÃ³n de Encabezados
Puedes inspeccionar los encabezados en los correos procesados y asegurarte de que Reply-To estÃ© correctamente configurado.


ðŸ›¡ Requisitos
âœ… Plesk 
âœ… Laravel / Botble
âœ… PHP >= 8
âœ… AWS SES y S3 configurados
âœ… Servidor con Postfix instalado
