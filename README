# ğŸ“§ Botble SES Email Forwarder  
ğŸ”„ **Plugin para reenviar correos con AWS SES sin perder el remitente original**  

## ğŸ“Œ DescripciÃ³n  
Este plugin para **Botble Laravel** permite gestionar el reenvÃ­o de correos utilizando **AWS SES**, evitando problemas con el remitente original gracias a la manipulaciÃ³n de encabezados como **Reply-To**.  

âœ… **CaracterÃ­sticas principales:**  
- ğŸ“© **RecepciÃ³n de correos a travÃ©s de AWS SES** y almacenamiento en S3.  
- ğŸ”” **Notificaciones eficientes con AWS Lambda + SNS**, evitando lÃ­mites de tamaÃ±o en mensajes.  
- ğŸ“¥ **Descarga y procesamiento del correo en el servidor.**  
- âœ‰ï¸ **ReenvÃ­o inteligente con Postfix**, asegurando que las respuestas lleguen al remitente correcto.  
- ğŸ— **IntegraciÃ³n sencilla en Botble Laravel.**  

---

## ğŸš€ **InstalaciÃ³n**  

### 1ï¸âƒ£ **Clonar el repositorio**  
```sh
git clone https://github.com/tuusuario/botble-ses-email-forwarder.git
cd botble-ses-email-forwarder
2ï¸âƒ£ Copiar archivos del plugin a Botble
sh
Copiar
Editar
cp -r botble-ses-email-forwarder /platform/plugins/ses-email-forwarder
3ï¸âƒ£ Activar el plugin en Botble
En el panel de administraciÃ³n de Botble Laravel, ve a Plugins y activa SES Email Forwarder.

4ï¸âƒ£ Configurar variables en .env
AÃ±ade las credenciales necesarias para AWS:

ini
Copiar
Editar
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-s3-bucket
AWS_SNS_TOPIC=your-sns-topic
âš™ï¸ CÃ³mo Funciona
ğŸ“¥ RecepciÃ³n del correo
Un usuario envÃ­a un correo a info@midominio.com.
AWS SES recibe el correo y lo almacena en S3.
ğŸ”” NotificaciÃ³n con AWS Lambda + SNS
Una Lambda procesa el mensaje, eliminando informaciÃ³n pesada y enviando solo los datos necesarios a SNS.
SNS notifica a nuestro servidor Botble Laravel.
ğŸ“¥ Descarga y encolado en Postfix
Nuestro plugin recibe la notificaciÃ³n, descarga el correo desde S3 y lo encola en Postfix para su reenvÃ­o.
âœ‰ï¸ ReenvÃ­o sin perder el remitente original
Manipulamos los encabezados del correo para incluir Reply-To, asegurando que si el destinatario responde, la respuesta llegue al remitente original.
ğŸ“Œ Ejemplo de modificaciÃ³n de encabezado en PHP:

php
Copiar
Editar
protected function addHeader(string $header, string $value, $rawEmail) {
    return preg_replace('/^' . preg_quote($header, '/') . ': (.+)$/mi', $header . ': ' . $value, $rawEmail);
}
ğŸ›  Uso del Plugin
ğŸ” VerificaciÃ³n de Encabezados
Puedes inspeccionar los encabezados en los correos procesados y asegurarte de que Reply-To estÃ© correctamente configurado.

ğŸ”„ Forzar ReenvÃ­o Manualmente
Si un correo no fue reenviado correctamente, puedes forzar su reenvÃ­o con:

sh
Copiar
Editar
php artisan ses:resend email_id
ğŸ›¡ Requisitos
âœ… Laravel >= 8.x
âœ… PHP >= 7.4
âœ… AWS SES y S3 configurados
âœ… Servidor con Postfix instalado

ğŸ¯ Contribuciones
Â¡Las contribuciones son bienvenidas! Si encuentras un bug o tienes una idea para mejorar el plugin, abre un issue o haz un pull request en GitHub.

ğŸ“œ Licencia
Este proyecto estÃ¡ bajo la licencia MIT.

ğŸ’¡ Autor: Tu Nombre
ğŸ“© Contacto: tuemail@midominio.com

yaml
Copiar
Editar

---

ğŸ“Œ **Â¿QuÃ© hace que este README sea efectivo?**  
âœ… **Estructurado y claro**, para facilitar la instalaciÃ³n y uso.  
âœ… **Incluye cÃ³digo de ejemplo** para ilustrar cÃ³mo funciona el plugin.  
âœ… **Destaca los beneficios clave** del plugin para motivar su uso.  
âœ… **Atractivo visualmente** con emojis y secciones bien organizadas.  

ğŸš€ **Â¡Listo para compartir en GitHub o cualquier repositorio!**